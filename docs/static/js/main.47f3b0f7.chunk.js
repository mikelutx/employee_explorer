(this["webpackJsonpemployee-explorer"]=this["webpackJsonpemployee-explorer"]||[]).push([[0],{30:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(18),s=n.n(r),o=(n(30),n(9)),i=n(2),l=n(4),u=n(0),b=function(e){var t=e.size,n=void 0===t?"sm":t,c=Object(i.f)(),r=Object(a.useState)(""),s=Object(l.a)(r,2),o=s[0],b=s[1];return Object(u.jsx)("form",{className:"my-2 my-lg-0",onSubmit:function(e){e.preventDefault(),""!==o.trim()&&c.push("/search/".concat(o.trim()))},children:Object(u.jsxs)("div",{className:"lg"===n?"input-group input-group-lg":"input-group",children:[Object(u.jsx)("input",{className:"form-control my-2 my-sm-0",type:"search",placeholder:"lg"===n?"Search for employee, e.g. John Hartman":"Search...","aria-label":"Search",onChange:function(e){e.preventDefault(),b(e.target.value)},value:o}),Object(u.jsx)("div",{className:"input-group-append",children:Object(u.jsx)("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit",children:"Search"})})]})})},j=function(){var e=Object(i.f)();return Object(u.jsx)("header",{children:Object(u.jsxs)("nav",{className:"navbar navbar-expand-md navbar-dark fixed-top bg-dark",children:[Object(u.jsx)("a",{className:"navbar-brand",href:"/",onClick:function(t){t.preventDefault(),e.push("/")},children:"Employee Explorer"}),Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(u.jsx)("ul",{className:"navbar-nav mr-auto"}),Object(u.jsx)(b,{})]})]})})};function d(){return Object(u.jsxs)("div",{className:"jumbotron",children:[Object(u.jsx)("h1",{className:"display-4",children:"Welcome"}),Object(u.jsx)("p",{className:"lead",children:"Employee explorer helps you to find people in org chart."}),Object(u.jsx)("hr",{className:"my-4"}),Object(u.jsx)("p",{children:"Search for the employee's full name."}),Object(u.jsx)(b,{size:"lg"})]})}var p=function(e){var t=e.employee,n=e.clickable,a=void 0===n||n,c=Object(i.f)();return t?Object(u.jsx)("div",{className:"card",children:Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:t.name}),Object(u.jsx)("h6",{className:"card-subtitle mb-2 text-muted",children:t.title}),t.subordinates&&t.subordinates.length>0?Object(u.jsx)("p",{children:"".concat(t.subordinates.length," subordinate(s)")}):Object(u.jsx)("p",{className:"font-italic",children:"Individual Contributor"}),a&&Object(u.jsx)("a",{href:"/",className:"btn btn-primary",onClick:function(e){e.preventDefault(),c.push("/employee/".concat(null===t||void 0===t?void 0:t.name))},children:"View"})]})}):null},m=function(e){var t=e.employeeList;return Object(u.jsx)("div",{className:"row",children:function(e){var t=[],n=new Set;return e.forEach((function(e){n.has(e.name)||(t.push(e),n.add(e.name))})),t}(t).map((function(e){return Object(u.jsx)("div",{className:"col-sm-6 col-md-4 col-lg-3 mb-3",children:Object(u.jsx)(p,{employee:e})},e.name)}))})},h=function(e){var t=e.children,n=Object(i.f)();return Object(u.jsx)("nav",{"aria-label":"breadcrumb",children:Object(u.jsxs)("ol",{className:"breadcrumb",children:[Object(u.jsx)("li",{className:"breadcrumb-item",children:Object(u.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),n.push("/")},children:"Home"})}),Object(u.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:t})]})})},O=n(8),f=n.n(O),x=n(12),v="https://api.additivasia.io/api/v1/assignment/employees/",g="empapp_",y=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ENABLE_LOCALSTORAGE;function S(){return(S=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N(t).then((function(e){return null!==e?[e]:[]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return E.apply(this,arguments)}function E(){return(E=Object(x.a)(f.a.mark((function e(t){var n,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t.toLowerCase(),n=v+encodeURIComponent(t),!y){e.next=12;break}if(e.prev=3,null===(a=localStorage.getItem(g+encodeURIComponent(t)))){e.next=8;break}return c=JSON.parse(a),e.abrupt("return",c);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(3);case 12:return e.abrupt("return",fetch(n).then((function(e){return e.json()})).then((function(e){if(Array.isArray(e)){var n={name:C(t),title:e[0],subordinates:e.length>=2&&e[1]["direct-subordinates"]};if(y)try{localStorage.setItem(g+encodeURIComponent(t),JSON.stringify(n))}catch(a){}return n}return null})));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function C(e){if(!e||0===e.length||!e.includes(" "))return e;var t=e.split(" "),n="";return t.forEach((function(e){""!==n&&(n+=" "),n+=e[0].toUpperCase()+e.substr(1)})),n}function _(e){return k.apply(this,arguments)}function k(){return(k=Object(x.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return N(e)})),e.abrupt("return",Promise.all(n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return w.apply(this,arguments)}function w(){return(w=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_(t).then((function(e){var t=[],n=[];return e.forEach((function(e){null!==e&&(t.push(e),e.subordinates&&e.subordinates.length>0&&(n=n.concat(e.subordinates)))})),[t,n]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}));var D=n(23),L=n(24),R=n(20),A=n(21),F=n(25),I=n(22);function P(){return Object(u.jsx)("div",{className:"d-flex justify-content-center",children:Object(u.jsx)("div",{className:"spinner-border",role:"status",children:Object(u.jsx)("span",{className:"sr-only",children:"Loading..."})})})}var W=function(e){return function(t){Object(F.a)(a,t);var n=Object(I.a)(a);function a(){return Object(R.a)(this,a),n.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){var t=this.props,n=t.loading,a=t.error,c=Object(L.a)(t,["loading","error"]);return a&&""!==a?Object(u.jsx)("div",{className:"alert alert-danger",role:"alert",children:a}):n?Object(u.jsx)(P,{}):Object(u.jsx)(e,Object(D.a)({},c))}}]),a}(c.a.Component)},H=W(m),U=function(e){var t=e.name,n=Object(a.useState)([]),c=Object(l.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)(!1),i=Object(l.a)(o,2),b=i[0],j=i[1],d=Object(a.useState)(""),p=Object(l.a)(d,2),m=p[0],O=p[1];return Object(a.useEffect)((function(){j(!0),O(""),function(e){return S.apply(this,arguments)}(t).then((function(e){0!==e.length?(s(e),j(!1)):O("We could not find employee with name ".concat(t))})).catch((function(){O("Error happened when searching for employee ".concat(t))}))}),[t]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(h,{children:'Search Result for "'.concat(t,'"')}),Object(u.jsx)(H,{loading:b,employeeList:r,error:m})]})},B=W(p),K=W(m),J=function(e){var t=e.name,n=Object(i.f)(),c=Object(a.useState)(null),r=Object(l.a)(c,2),s=r[0],o=r[1],b=Object(a.useState)(!1),j=Object(l.a)(b,2),d=j[0],p=j[1],m=Object(a.useState)(""),O=Object(l.a)(m,2),f=O[0],x=O[1],v=Object(a.useState)([]),g=Object(l.a)(v,2),y=g[0],S=g[1],E=Object(a.useState)(!1),C=Object(l.a)(E,2),_=C[0],k=C[1],w=Object(a.useState)([]),D=Object(l.a)(w,2),L=D[0],R=D[1],A=Object(a.useState)(!1),F=Object(l.a)(A,2),I=F[0],P=F[1];Object(a.useEffect)((function(){o(null),S([]),R([]);var e=function e(t){T(t).then((function(t){R((function(e){return e.concat(t[0])})),t[1].length>0?e(t[1]):P(!1)}))};p(!0),N(t).then((function(n){null!==n?(o(n),p(!1),n&&n.subordinates&&n.subordinates.length>0&&(k(!0),T(n.subordinates).then((function(t){S(t[0]),k(!1),t[1].length>0&&(P(!0),e(t[1]))})))):x("We could not find employee with name ".concat(t))}))}),[t]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(h,{children:'Employee: "'.concat(t,'"')}),Object(u.jsx)("div",{className:"mb-3",children:Object(u.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(e){e.preventDefault(),n.goBack()},children:"Go Back"})}),Object(u.jsx)("div",{children:Object(u.jsx)(B,{loading:d,employee:s,clickable:!1,error:f})}),s&&s.subordinates&&s.subordinates.length>0&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h4",{className:"mt-3",children:"Direct subordinate(s) of ".concat(t)}),Object(u.jsx)(K,{loading:_,employeeList:y}),Object(u.jsx)("h4",{className:"mt-3",children:"Indirect subordinate(s) of ".concat(t)}),Object(u.jsx)(K,{loading:I,employeeList:L})]})]})};var V=function(){return Object(u.jsxs)(o.a,{basename:"/employee_explorer",children:[Object(u.jsx)(j,{}),Object(u.jsx)("main",{className:"container",children:Object(u.jsx)("section",{children:Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{exact:!0,path:"/search/:name",render:function(e){return Object(u.jsx)(U,{name:e.match.params.name})}}),Object(u.jsx)(i.a,{exact:!0,path:"/employee/:name",render:function(e){return Object(u.jsx)(J,{name:e.match.params.name})}}),Object(u.jsx)(i.a,{path:"/",component:d})]})})})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(V,{})}),document.getElementById("root")),z()}},[[38,1,2]]]);
//# sourceMappingURL=main.47f3b0f7.chunk.js.map